<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
      <link rel="stylesheet" href="../../../css/pod.css">
      <meta name="viewport" content="width=device-width">

      <title>Web::URL::Canonicalize</title><link rel="license" href="#LICENSE"></head><body><h1><a href="../../.." rel="top">The manakai project</a></h1>
  <nav class="breadcrumb">
      <ul>
        <li><a href="../../../docs" rel="up up up">Documents</a></li>
        <li><a href="../../../pod/#modules" rel="up up">Perl modules</a></li>
        <li><a href="../../../pod/perl-web-url" rel="up">perl-web-url</a></li>
        <li><a href="" rel="bookmark">Web::URL::Canonicalize</a></li>
      </ul>
    <ul class="pod-source"><li><a href="https://github.com/manakai/perl-web-url/tree/master/lib/Web/URL/Canonicalize.pm">Source</a></li></ul></nav><article>





<hgroup><h1><code>Web::URL::Canonicalize</code></h1><h2>Canonicalize URLs as Web browsers do</h2></hgroup><section id="SYNOPSIS"><h1>SYNOPSIS</h1>

<pre>
<code>  use Web::URL::Canonicalize;
  $canon_url = url_to_canon_url $url, $canon_base_url, $charset;</code></pre>

</section><section id="DESCRIPTION"><h1>DESCRIPTION</h1>

<p>The <code>Web::URL::Canonicalize</code> module parses, resolves, and canonicalizes URLs as Web browsers do.</p>

<p>Web browsers canonicalize URLs in many places. For example, a relative URL specified in the <code>href</code> attribute of an <code>a</code> element is resolved against the base URL and then canonicalized such that some set of characters are percent-encoded if they has not yet.</p>

<p>URL parsing, resolving, and canonicalizing rules are too complex and sometimes vary across browsers. This module is trying to imitate their behavior as far as possible. However, emulating a particular browser is not a goal. The canonicalization algorithm implemented by this module is different from any browser. If you are interested in how they differ, please run <code>t/browsers/decomps.html</code>.</p>

</section><section id="FUNCTIONS"><h1>FUNCTIONS</h1>

<p>This module exports a function by default:</p>

<dl>
<dt id="$canon_url_=_url_to_canon_url_$url,_$canon_base_url,_$charset"><code>$canon_url = url_to_canon_url $url, $canon_base_url, $charset</code></dt>

<dd>
<p>Canonicalize a URL.</p>

<p>The first argument, <code>$url</code>, is the URL to be canonicalized, as a character string. It can be any string. This argument is required.</p>

<p>The second argument, <code>$canon_base_url</code>, is the base URL used for the resolution of the URL. This argument is optional, as base URL is not always given (consider a URL given as a command-line argument to a program). If specified, the base URL <b>must</b> be in its canonical form. The result returned by this function with non-canonical base URL might be different from the result with canonical base URL.</p>

<p>The third argument, <code>$charset</code>, is the character encoding used to percent-encode non-ASCII characters in the <code>query</code> component, if any. This argument is optional; <code>UTF-8</code> is the default. The character encoding of the document in which the URL is embedded should be specified in most cases.</p>

<p>The function returns the canonicalized URL, as a character string. If the given URL does not have the canonical form (e.g. because the URL has invalid host name, or because a relative URL is specified but the base URL is a <code>mailto:</code> URL), <code>undef</code> is returned.</p>

<p>The canonicalized URL, if any, is always an absolute URL. It is not always a conforming RFC 3986 URI reference. It might contain space characters. It might contain non-ASCII characters.</p>

</dd><dt id="$port_=_Web::URL::Canonicalize::get_default_port_$scheme"><code>$port = Web::URL::Canonicalize::get_default_port $scheme</code></dt>

<dd>
<p>Return the default port <code class="url">&lt;<a href="https://url.spec.whatwg.org/#default-port">https://url.spec.whatwg.org/#default-port</a>&gt;</code> for the scheme. The argument must be a canonicalized (lowercase) URL scheme. If no default port is defined for the scheme, <code>undef</code> is returned.</p>
</dd>
</dl>

<p>Additionally, following functions can be exported if necessary (and if you understand what they do): <code>parse_url</code>, <code>resolve_url</code>. <code>canonicalize_parsed_url</code>, and <code>serialize_parsed_url</code>.</p>

</section><section id="TEST_CASES"><h1>TEST CASES</h1>

<p>There are several thousands of test cases in repository <code class="url">&lt;<a href="https://github.com/wakaba/tests-web-url">https://github.com/wakaba/tests-web-url</a>&gt;</code>.</p>

</section><section id="SPECIFICATION"><h1>SPECIFICATION</h1>

<p>URL Standard <code class="url">&lt;<a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>&gt;</code>.</p>

</section><section id="SEE_ALSO"><h1>SEE ALSO</h1>

<p>Tentative spec for URL canonicalization <code class="url">&lt;<a href="https://github.com/wakaba/tests-web-url/blob/master/spec.txt">https://github.com/wakaba/tests-web-url/blob/master/spec.txt</a>&gt;</code>.</p>

<p><a href="../../../pod/Web/IPAddr/Canonicalize" class="podlinkpod">Web::IPAddr::Canonicalize</a>.</p>

<p><a href="../../../pod/Web/DomainName/Canonicalize" class="podlinkpod">Web::DomainName::Canonicalize</a>.</p>

<p><a href="../../../pod/Web/Encoding" class="podlinkpod">Web::Encoding</a>.</p>

</section><section id="AUTHOR"><h1>AUTHOR</h1>

<p>Wakaba &lt;wakaba@suikawiki.org&gt;.</p>

</section><section id="LICENSE"><h1>LICENSE</h1>

<p>Copyright 2011-2016 Wakaba &lt;wakaba@suikawiki.org&gt;.</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>




</section></article><footer>
  <p>The manakai project since 2002
  </p><ul>
    <li><a href="../../.." rel="top">Top</a>
    </li><li><a href="../../../contact">Contact</a>
  </li></ul>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-39820773-4', 'manakai.github.io');
ga('send', 'pageview');
</script>
  </footer></body></html>